# 20. 开发者工具

Spring Boot包含了一个额外的工具集，能让你的应用开发体验更方便一些。`spring-boot-devtools`模块能够包含进任何项目中，来提供额外的开发阶段特性。如果需要添加devtools支持，需要将相关的模块依赖加入构建系统中，Maven和Gradle的样例代码如下：

**Maven**

```xml
<dependencies>
 <dependency>
    <groupId>org.springframework.boot</groupId> 
    <artifactId>spring-boot-devtools</artifactId> 
    <optional>true</optional>
 </dependency>
</dependencies>
```

**Gradle**

```xml
dependencies { 
 compile("org.springframework.boot:spring-boot-devtools")
}
```

> **注意**  
> 当运行一个完全打包的程序时，开发者工具会自动关闭。如果你的应用是通过`java -jar`命令或通过特定的类加载器启动的，那该项目会被认为是“产品级应用”。将依赖标记为optional是阻止开发工具间接影响到使用你应用的其它模块的最佳实践。Gradle不支持optional依赖开箱即用，同时你可能想看看[propdeps-plugin](https://github.com/spring-projects/gradle-plugins/tree/master/propdeps-plugin)
>
> **小贴士**  
> 重新打包的项目文件默认是不包含devtools的。如果你希望使用[某些远程devtools特性]()，必须要设置`excludeDevtools`构建属性为关闭来包含它（devtools）。Maven和Gradle插件均支持该属性。

## 20.1 默认属性

Spring Boot支持的某些库使用了缓存来提升性能。例如，[template engines]()缓存编译模板来避免重复的解析模板文件。还有Spring MVC在处理静态资源时，能够通过添加HTTP缓存Header头来进行响应。

然而缓存对生产环境使用非常有好处，但对于开发阶段会阻止你看到修改的变化。因为这个原因，spring-boot-devtools默认关闭了缓存选项。

缓存选项通常在`application.properties`文件中进行配置。例如,Thymeleaf提供了`spring.thymeleaf.cache`属性。不需要手动设置这些属性，`spring-boot-devtools`模块会自动提供灵敏的开发阶段配置。

> **小贴士**
> 
> 需要了解devtools的完整属性列表，请查阅[DevToolsPropertyDefaultPostProcessor](https://github.com/spring-projects/spring-boot/tree/v2.0.0.RELEASE/spring-boot-project/spring-boot-devtools/src/main/java/org/springframework/boot/devtools/env/DevToolsPropertyDefaultsPostProcessor.java)

## 20.2 自动重启

当classpath中的文件发生变化时，使用`spring-boot-devtools`插件的应用就会自动重启。当使用IDE进行开发时，这是一个很有用的特性，因为当代码改变时会给你很快的反馈。默认情况下，它会监控所有classpath指向的文件内所有文件的变化。注意某些资源文件，例如静态资源和视图模板，不需要重启应用。

> **触发重启**
> 
> 当DevTools监控classpath的资源时，唯一能触发重启操作的就是更新classpath。更新classpath的方式取决于你在使用的IDE。在Eclipse中，保存修改后的文件会对classpath的更新操作继而触发重启。在IntelliJ IDEA中，编译项目(Build->Make Project)会有同样的效果。

> **注意**
> 
> 只要































