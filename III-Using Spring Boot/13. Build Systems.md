# 编译系统

强烈推荐大家选择一个和支持 依赖管理 的编译系统，以便支持从Maven中央仓库获取依赖。我们推荐选择Maven或者Gradle.Spring Boot也可以选择其他的编译系统如Ant，但是支持的不是特别好。


## 13.1 依赖管理

Spring Boot的每个版本均提供它支持的依赖列表。在练习过程中，没有必要在编译配置中提供依赖库的版本号，因为Spring Boot能够自行管理。当你升级Spring Boot后，这些依赖库也会被同步更新的。

> **小贴士**
> 
> 如果必要，你也可以指定依赖库版本以覆盖Spring Boot推荐的依赖库版本号。

这个依赖库列表包含了所有Spring Boot将使用到的spring模块及第三方库的详细清单。这个列表同时在[Bill of Materials]()([spring-boot-dependencies]())中均被Maven和Gradle所支持。

> **警告**
> 
> Spring Boot的每个版本均和Spring Frameword的基线版本相关联。我们强烈推荐你不要指定版本。

## 13.2 Maven

Maven用户可以从`spring-boot-starter-parent`项目继承以获得默认的配置包。该父级项目提供了如下特性：

* 默认编译器级别为Java 1.8
* 高灵敏度的 [资源过滤器](https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html) --Not good
* 高灵敏度的插件配置（[exec plugin](http://www.mojohaus.org/exec-maven-plugin/)，[Git commitID](https://github.com/ktoso/maven-git-commit-id-plugin)，[shade](https://maven.apache.org/plugins/maven-shade-plugin/)）
* 为`application.properties`和`application.yml`服务的高灵敏度的资源过滤器，包括特定的profile文件(例如，`application-dev.properties`和`application-dev.yml`)--Not good

注意，因为`application.properties`和`application.yml`文件接收Spring风格的占位符（${...}）,Maven的过滤器将其改变为使用@...@作为占位符(你也可以通过设置`resource.delimiter` Maven属性文件来覆写)

### 继承自Starter Parent

如何配置项目让其继承自`spring-boot-starter-parent`，对应的代码如下：

```xml
<!-- Inherit defaults from Spring Boot -->
<parent> 
	<groupId>org.springframework.boot</groupId> 
	<artifactId>spring-boot-starter-parent</artifactId> 	<version>2.0.0.RELEASE</version>
</parent>
```

> **注意**
> 
> 你只需要在此依赖中指定Spring Boot的版本号。如果你导入了其他的starters启动器，可以安全的忽略版本号。

通过安装，你可以通过在项目中覆写属性来修改某个依赖。例如，为升级至另一个Spring Data的版本，你可以添加如下代码到`pom.xml`文件中：

```xml
 <properties> 
 	<spring-data-releasetrain.version>Fowler-SR2</spring-data-releasetrain.version>
</properties>
```

> **小贴士**
> 
> 可以查阅[spring-boot-dependencies](https://github.com/spring-projects/spring-boot/tree/v2.0.0.RELEASE/spring-boot-project/spring-boot-dependencies/pom.xml)来获取支持的属性列表

### 使用无父POM文件的Spring Boot

不是所有的开发者都喜欢继承`spring-boot-starter-parent`。你可能有自己合作方的标准父级项目，或者你更喜欢明确的声明所有的Maven配置。

如果你不想使用`spring-boot-starter-parent`，你仍然可以使用`scope=import 依赖库`来享受依赖管理的便利（插件管理除外），样例如下：

```xml
<dependencyManagement>
  <dependencies>
  <dependency>
   <!-- Import dependency management from Spring Boot -->
	<groupId>org.springframework.boot</groupId> 
	<artifactId>spring-boot-dependencies</artifactId> 	<version>2.0.0.RELEASE</version> 	<type>pom</type>
	<scope>import</scope> </dependency>
 </dependencies>
</dependencyManagement>
```

上面的这个样例没有让你通过属性修改的方式覆写单一依赖，为得到一样的效果，你必须在项目的 `dependencyManagement`节点下，`spring-boot-dependencies`入口之前，添加一个入口。例如，为了升级至新的Spring Data版本，你可以添加如下代码到你的`pom.xml`文件中：

```xml
<dependencyManagement>
<dependencies>
  <!-- Override Spring Data release train provided by Spring Boot -->
	<dependency> <groupId>org.springframework.data</groupId> 	<artifactId>spring-data-releasetrain</artifactId> 	<version>Fowler-SR2</version>
	<type>pom</type>
	<scope>import</scope>
  </dependency>
  <dependency>
	<groupId>org.springframework.boot</groupId>
 	<artifactId>spring-boot-dependencies</artifactId> 	<version>2.0.0.RELEASE</version> <type>pom</type>
	<scope>import</scope>
	 </dependency>
 </dependencies>
</dependencyManagement>
```

> **注意**
> 
> 在上面的例子中，我们指定了一个BOM头，但是任何依赖类型均可以按照同一方法被覆写。

## 13.3 Gradle

要了解更多关于在Spring Boot上使用Gradle的信息，请查阅Spring Boot的Gradle插件文档：

* 参考指南([HTML](https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/gradle-plugin/reference/html) 和 [PDF](https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/gradle-plugin/reference/pdf/spring-boot-gradle-plugin-reference.pdf))
* [API](https://docs.spring.io/spring-boot/docs/2.0.0.RELEASE/gradle-plugin/api/)

## 13.4 Ant

也有可能你会使用Apache Ant+Ivy来编译Spring Boot项目。`spring-boot-antlib`“AntLib”模块也可以协助Ant创建可执行jars文件。

为声明这些依赖包，一个典型的`ivy.xml`文件代码可能会如下所示：

```xml
<ivy-module version="2.0">
	<info organisation="org.springframework.boot" module="spring-boot-sample-ant" /> 
	<configurations>
		<conf name="compile" description="everything needed to compile this module" />
		<conf name="runtime" extends="compile" description="everything needed to run this module" /> 
	</configurations>
	<dependencies>
		<dependency org="org.springframework.boot" name="spring-boot-starter" rev="${spring-boot.version}" conf="compile" />
 	</dependencies>
</ivy-module>
```

一个典型的`build.xml`

















